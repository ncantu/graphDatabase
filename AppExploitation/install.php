<?php

class Install {
	
	CONST SEC_SALT_FILE_BASENAME               = 'secSalt';
	CONST SEC_TRACE_PASSWORD_KEY_FILE_BASENAME = 'secT05052016';												     // TODO SECURITY: TO CHANGE
	CONST SEC_TRACE_PASSWORD_KEY   			   = 'bcb04b7e103a0cd8b54763051cef08bc55abe029fdebae5e1d417e2ffb2a00a3'; // TODO TO CHANGE
	CONST SEC_SESSION_PASSWORD_KEY 			   = 'bcb04b7e103a0cd8b54763051cef08bc55abe029fdebae5e1d417e2ffb2a00a3'; // TODO TO CHANGE
	CONST LIB_DIR                              = '../lib/';															 // TODO TO CHANGE AND CONFIGURE YOU'RE APPLICATION
	CONST LOG_DIR                              = '../log/';															 // TODO TO CHANGE AND CONFIGURE YOU'RE APPLICATION
		
	public function __construct(){
		
		$result = $this->secSaltGen();
		
		if($result === false) return false;
		
		$result = $this->secTraceKeyPassword();
		
		if($result === false) return false;
		
		$result = $this->secSessionKeyPassword();
		
		if($result === false) return false;
		
		mkdir(self::LOG_DIR);
	}

	private function secSaltGen(){
		 
		$salt = mcrypt_create_iv(16, MCRYPT_DEV_URANDOM);
	
		return file_put_contents(dirname(__FILE__).self::LIB_DIR.self::SEC_SALT_FILE_BASENAME, $salt);
	}
	
	private function secTraceKeyPassword(){
		
		$key = sha1(SEC_TRACE_PASSWORD_KEY);
			
		return file_put_contents(dirname(__FILE__).self::LIB_DIR.self::SEC_TRACE_PASSWORD_KEY, $key);
	}
	
	private function secSessionKeyPassword(){
		
		$key = sha1(SEC_SESSION_PASSWORD_KEY);
			
		return file_put_contents(dirname(__FILE__).self::LIB_DIR.self::SEC_SESSION_PASSWORD_KEY, $key);
	}
}
?>