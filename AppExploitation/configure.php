<?php

require_once '../lib/_require.php';

class configure {
	
	CONST VAR_NAME_SUFFIX = 'List';
 
	public $objList;
	
	public function __construct($input, $varNameSuffix = self::VAR_NAME_SUFFIX) {
		
		Conf::$userId    = $input->userId;
		Conf::$appName   = $input->appName;
		Conf::$mockState = $input->mockState;
		$result          = new Conf();
		
		if($result === false) return false;
		
		foreach(Conf::$objectList as $objName => $objDetailList){
		
			$varName                 = $objName.$varNameSuffix;
			$this->objList[$varName] = new ElementList($objName, $objDetailList->attributListDefault);
		}
	}
}

if(isset($_REQUEST['mockState']) === true && empty($_REQUEST['mockState']) === false && $_REQUEST['mockState'] !== false ) {
	
	$input = file_get_contents('../mock/'.$_REQUEST['mockState'].'.json');
	$input = json_decode($input);
}

$result   = new configure($input);

if($result === false) return false;

echo '<pre>';
var_export($result);
echo '</pre>';

?>