<?php

class Node {

    use TraitPath;

    CONST SEC_TYPE = 'N';

    private $name;
    private $extend;
    private $attributList = array();

    public function __construct($conf) {

        $this->name         = $conf->return;
        $this->extend       = $conf->returnType;
        $this->attributList = Attribut::listSetFromConf($conf);

        $this->pathSet();
    }

    public static function confToLabelConf($nodeVarName, $nodeConf) {

        $conf               = new stdClass();
        $conf->postNameList = array();
        $conf->postTypeList = array();

        if(isset($conf->onCreateSetList) === true) {

            foreach($conf->onCreateSetList as $attributName => $attributDefaultValue) {

                $key                      = count($conf->postNameList);
                $conf->postNameList[$key] = $attributName;
                $type                     = gettype($attributDefaultValue);

                if($type === 'object') {

                    $type = get_class($attributDefaultValue);
                }
                $conf->postTypeList[$key] = $type;
            }
        }
        $conf->return      = $nodeVarName;
        $conf->returnType  = $nodeConf->label;

        return $conf;
    }

    public static function add($conf, $labelConf) {

        Label::add($labelConf);

        if(isset(FrameWork::$nodeList[$conf->return]) === true) {

            return false;
        }
        FrameWork::$nodeList[$conf->return] = new Node($conf);

        return true;
    }
}

?>